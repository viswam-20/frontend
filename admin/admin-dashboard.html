<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Student Hub - Admin Dashboard</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <style>
      body {
        background: #f8f9fa;
      }
      header {
        background: #212529;
        color: #fff;
        padding: 15px 30px;
      }
      .kpi-card {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }
      .chart-container {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }
      .tool-card {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }
      canvas {
        max-height: 260px;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="d-flex justify-content-between align-items-center">
      <h2 class="m-0">
        <i class="fas fa-user-shield me-2"></i> Admin Dashboard
      </h2>
      <button class="btn btn-warning">
        <i class="fas fa-file-download me-1"></i> Generate Reports
      </button>
    </header>

    <main class="container-fluid py-4">
      <!-- KPI Cards -->
      <section class="row g-3 mb-4">
        <div class="col-md-3">
          <div class="kpi-card">
            <p>Verification Backlog</p>
            <h3 class="text-danger">125</h3>
          </div>
        </div>
        <div class="col-md-3">
          <div class="kpi-card">
            <p>First-Time Pass Rate</p>
            <h3 class="text-success">87%</h3>
          </div>
        </div>
        <div class="col-md-3">
          <div class="kpi-card">
            <p>Avg. Approval Time</p>
            <h3 class="text-warning">5.2 Hrs</h3>
          </div>
        </div>
        <div class="col-md-3">
          <div class="kpi-card">
            <p>Total Student Users</p>
            <h3 class="text-primary">3,450</h3>
          </div>
        </div>
      </section>

      <!-- Charts Grid -->
      <section class="row g-3">
        <div class="col-lg-6">
          <div class="chart-container">
            <h5>Submission Forecast (7-Day)</h5>
            <canvas id="forecastChart"></canvas>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="chart-container">
            <h5>Document Status by Department</h5>
            <canvas id="complianceChart"></canvas>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="chart-container">
            <h5>Faculty Training Needs</h5>
            <canvas id="facultyTrainingChart"></canvas>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="chart-container">
            <h5>Decline Reasons (Last 30 Days)</h5>
            <canvas id="declineReasonsChart"></canvas>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="chart-container">
            <h5>Faculty Workload Distribution</h5>
            <canvas id="workloadChart"></canvas>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="chart-container">
            <h5>Data Retention Compliance</h5>
            <div class="p-3 text-center">
              <div class="progress" style="height: 25px">
                <div class="progress-bar bg-success" style="width: 95%">
                  95% Compliant
                </div>
              </div>
              <p class="mt-2">
                Files scheduled for archive in 30 days: <b>4,200</b>
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Tools Section -->
      <section class="row g-3 mt-4">
        <div class="col-md-4">
          <div class="tool-card">
            <h5>System Integrity Monitor</h5>
            <p>
              OCR Latency: <b>450ms</b><br />DB Query Speed: <b>950ms</b
              ><br />Storage: <b>78% Free</b>
            </p>
            <button class="btn btn-outline-dark btn-sm">View Logs</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="tool-card">
            <h5>Benchmarking Panel</h5>
            <p>
              Target Approval: <b>6.0h</b><br />Current:
              <span class="text-success fw-bold">5.2h (Excellent)</span>
            </p>
            <button class="btn btn-outline-dark btn-sm">Set Benchmarks</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="tool-card">
            <h5>Policy Rule Editor</h5>
            <p>5 Active Rules. Last Update: <b>2025-09-15</b></p>
            <button class="btn btn-outline-dark btn-sm">Edit Rules</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="tool-card">
            <h5>Audit Trail</h5>
            <p>3,450 Actions Logged. Last Audit: <b>1h ago</b></p>
            <button class="btn btn-outline-dark btn-sm">View Logs</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="tool-card">
            <h5>User Role Manager</h5>
            <p>125 Faculty Accounts, 4 HODs Delegated</p>
            <button class="btn btn-outline-dark btn-sm">Manage Users</button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="tool-card">
            <h5>Student Profile Integrity</h5>
            <p><b>85 Students</b> below score 70</p>
            <button class="btn btn-outline-dark btn-sm">View High-Risk</button>
          </div>
        </div>
      </section>
    </main>

    <!-- JS: Chart Rendering -->
    <script>
      Chart.register(ChartDataLabels);
      const chartColors = {
        primary: "#6366f1",
        success: "#10b981",
        danger: "#ef4444",
        warning: "#f59e0b",
        info: "#3b82f6",
      };

      // Data
      const departmentData = {
        labels: ["CS", "ME", "EE", "CE", "Arts"],
        approved: [450, 310, 280, 190, 120],
        declined: [35, 18, 12, 10, 5],
        pending: [45, 30, 20, 25, 5],
      };
      const declineReasonsData = {
        labels: [
          "Missing Seal",
          "Dates Mismatch",
          "Illegible Scan",
          "Wrong Type",
          "Short Duration",
        ],
        counts: [45, 25, 15, 12, 10],
      };
      const workloadData = {
        labels: [
          "Prof. Patel",
          "Dr. Khan",
          "Dr. Chen",
          "Prof. Sharma",
          "Prof. Singh",
        ],
        pendingDocs: [40, 25, 18, 15, 12],
      };
      const forecastData = {
        labels: ["Today", "+1", "+2", "+3", "+4", "+5", "+6"],
        actual: [180, 210, 195, 230, 0, 0, 0],
        predicted: [190, 220, 200, 235, 290, 310, 270],
      };
      const facultyTrainingData = {
        labels: ["Prof. X", "Prof. Y", "Prof. Z", "Prof. A", "Prof. B"],
        declineRate: [15, 12, 8, 4, 3],
        approvalTime: [12.5, 7.8, 5.2, 3.1, 4.0],
      };

      // Charts
      new Chart(document.getElementById("forecastChart"), {
        type: "line",
        data: {
          labels: forecastData.labels,
          datasets: [
            {
              label: "Predicted",
              data: forecastData.predicted,
              borderColor: chartColors.primary,
              fill: true,
              tension: 0.4,
            },
            {
              label: "Actual",
              data: forecastData.actual,
              borderColor: chartColors.warning,
              borderDash: [5, 5],
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { position: "bottom" } },
        },
      });
      new Chart(document.getElementById("complianceChart"), {
        type: "bar",
        data: {
          labels: departmentData.labels,
          datasets: [
            {
              label: "Approved",
              data: departmentData.approved,
              backgroundColor: chartColors.success,
              stack: "s",
            },
            {
              label: "Declined",
              data: departmentData.declined,
              backgroundColor: chartColors.danger,
              stack: "s",
            },
            {
              label: "Pending",
              data: departmentData.pending,
              backgroundColor: chartColors.warning,
              stack: "s",
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { position: "top" } },
          scales: { x: { stacked: true }, y: { stacked: true } },
        },
      });
      new Chart(document.getElementById("facultyTrainingChart"), {
        type: "bar",
        data: {
          labels: facultyTrainingData.labels,
          datasets: [
            {
              label: "Decline %",
              data: facultyTrainingData.declineRate,
              backgroundColor: chartColors.danger,
              yAxisID: "y1",
            },
            {
              label: "Approval Time (hrs)",
              data: facultyTrainingData.approvalTime,
              backgroundColor: chartColors.info,
              yAxisID: "y2",
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { position: "bottom" } },
          scales: {
            y1: { type: "linear", position: "left" },
            y2: {
              type: "linear",
              position: "right",
              grid: { drawOnChartArea: false },
            },
          },
        },
      });
      new Chart(document.getElementById("declineReasonsChart"), {
        type: "bar",
        data: {
          labels: declineReasonsData.labels,
          datasets: [
            {
              data: declineReasonsData.counts,
              backgroundColor: chartColors.primary,
            },
          ],
        },
        options: {
          indexAxis: "y",
          responsive: true,
          plugins: { legend: { display: false } },
        },
      });
      new Chart(document.getElementById("workloadChart"), {
        type: "bar",
        data: {
          labels: workloadData.labels,
          datasets: [
            {
              data: workloadData.pendingDocs,
              backgroundColor: [
                chartColors.danger,
                chartColors.warning,
                chartColors.primary,
                chartColors.success,
                chartColors.info,
              ],
            },
          ],
        },
        options: { responsive: true, plugins: { legend: { display: false } } },
      });
    </script>
  </body>
</html>